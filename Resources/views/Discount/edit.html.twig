{% extends 'MobileCartAdminBundle::Widgets/Template/edit.html.twig' %}
{% block header_text %}Edit Discount{% endblock %}
{% block subheader_text %}Name: {{ entity.name }}{% endblock %}
{% block admin_menu_list %}
    <li>
        <a href="{{ renderGridBackUrl('cart_admin_discount') }}"><i class="fa arrow"></i> Back to Discounts</a>
    </li>
    {{ parent() }}
{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('bundles/mobilecartadmin/css/discount.css') }}" rel="stylesheet">
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('bundles/mobilecartadmin/js/ConditionWidget.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/mobilecartadmin/js/discount-global.js') }}"></script>
    <script type="text/javascript">
        $(function() {

            var widget = new ConditionWidget({
                containerEl: $('{{ container }}'),
                targetInput: $('{{ condition_input }}'),
                conditionInput: $('{{ target_input }}'),
                operators: {{ operators_json|raw }},
                logicalOperators: {{ logical_operators_json|raw }},
                varSets: {{ var_sets|raw }}
            });

            $('#builder-submit').click(function(e) {
                widget.serialize();
                return true;
            });

            $('a.builder-serialize').click(function(e) {
                e.preventDefault();
                widget.serialize();
            });

        });
    </script>
{% endblock %}
